# Телеграм-бот для продажи автомобилей

## Команды
**Команды, доступные заказчику**
— `/start` — запускает создание заказа
— `/language` — выводит клавиатуру переключения языка в боте

**Скрытые команды**
Следующие команды доступны только пользователям со статусом продавца (`seller`). При попытке клиента ввести одну из перечисленных ниже команд, будет отправлено сообщение с предупреждением об ограничении прав доступа.

— `/admin` — выводит меню управления заказами
— `/data` —  выводит меню управления данными в базе данных

## Команда `/start`
Команда формирует заказ пользователя.
Сначала проверяет есть ли в базе данных текущий пользователь: 
— если такой пользователь существует, то берет информацию о нем для создания заказа
— если пользователь не был найден в базе данных, то он добавляется

####Выбор марки автомобиля

![Car brand](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/select_car_brand.png)

При нажатии на кнопку с названием марки автомобиля 
в заказ добавляется соответствующая марка. После выбора осуществляется переход к следующему шагу.

***На данном шаге и последующих шагах присутствует кнопка «Отмена» которая прекращает создание заказа***

####Выбор расположения руля

![Steering wheel position](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/select_steering_wheel_position.png)

При нажатии на кнопку с расположением руля автомобиля в заказ добавляется соответствующее расположение руля. После выбора осуществляется переход к следующему шагу.

***На данном шаге и последующих шагах присутствует кнопка «Назад» которая перемещает к предыдущему шагу в заказе***

####Выбор расположения руля

![Car color](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/select_color.png)

При нажатии на кнопку с цветом автомобиля в заказ добавляется соответствующий цвет.
После выбора осуществляется переход к следующему шагу.

####Добавление комментария к заказу

![Comment](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/add_comment.png)

При отправке сообщения боту создастся комментарий к заказу.
Нажатие на кнопку «Без комментария» создаст заказ без комментария.

####Завершение формаирования заказа

![Order](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/end_create_order.png)

Выводится базовая информация о созданном заказе

## Команда `/language`
Команда вызывает меню с выбором используемого языка

Бот поддерживает следующие языки:
— английский
— русский
— арабский
— иврит

![Languages](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/languages.png)

При нажатии на кнопку с названием языка осуществляется переключение языка в боте и выводится уведомление о смене языка.

![New language](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/new_language.png)

## Команда `/admin`

Открывает меню для управления заказами

![Main menu](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/main_admin_menu.png)

В меню есть следующие кнопки:
— Доступные заказы. В скобках — количество таких заказов
— Выбранные заказы. В скобках — количество таких заказов
— Отправить пост

***На данном шаге и последующих шагах присутствует кнопка «Выйти» которая выходит из меню администратора***

####Доступные заказы

Выводит список всех заказов, которые еще не выбрал ни один продавец.

![Unselected orders](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/unselected_orders.png)

При нажатии на кнопку с информацией о заказе, переходим в меню с действиями к заказу который выбрали

***На данном шаге и последующих шагах присутствует кнопка «Назад» которая перемещает в меню на уровень выше***

#####Меню действий с невыбранным заказом
![Unselected order menu](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/unselected_order_menu.png)

Выводит базовую информацию о заказе и кнопку выбора данного заказа

#####Выбор заказа
![Select order](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/select_order.png)

Выводит сообщении о заказе, который был выбран

####Выбранные заказы
Выводит список всех заказов, которые были выбранны текущим пользователем.

При нажатии на кнопку с информацией о заказе, переходим в меню с действиями к заказу который выбрали

![Selected orders](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/selected_orders.png)

***На данном шаге и последующих шагах присутствует кнопка «Назад» которая перемещает в меню на уровень выше***

#####Меню действий с выбранным заказом
![Selected order menu](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/selected_order_menu.png)

Выводит базовую информацию о заказе с комментарием к данному заказу (если комментарий есть) и кнопки:
— Чат с заказчиком
— Отменить выбор заказа
— Изменить статус заказа

#####Чат с заказчиком
![Chat](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/chat.png)

При отправке сообщения создается чат с заказчиком. После отправки сообщения, оно отправляется заказчику, а продавцу выводится сообщение о созданном чате с кнопкой «Выйти из чата»

![Chat seller](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/chat_seller.png)
*Окно продавца*

Заказчику приходит сообщение с заголовком, что сообщение было отправленно продавцом.
![Chat customer](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/chat_customer.png)
*Окно заказчика*

Дальнейший обмен сообщениями между заказчиком и продавцом осуществляется как в обычном чате между двумя пользователями.

После того, как заказчик нажмет на кнопку «Выйти из чата», чат между заказчиком и пользователем будет закрыт и пользователь будет уведомлен о том, что последующие отправленые сообщения продавцу не будут обработаны и доставлены продавцу.

![Leave chat](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/leave_chat.png)

#####Отменить выбор заказа
Снимает выбор с заказа текущим пользователем и заказа возвращается в список всех невыбранных заказов. Если до этого момента статус заказа был изменен, то он становится `open`

![Unselect order](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/unselect_order.png)

#####Изменить статус заказа
Всего доступно три статуса заказа:
— открыт (`open`)
— в процессе (`in_process`)
— закрыт (`close`)

В зависимости от текущего статуса заказа выводятся кнопки с возможными статусами для заказа, исключая текущий статус.

![Change status menu](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/change_status_menu.png)

При нажатии на кнопку с названием статуса происходит смена статуса заказа

![Changed status](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/changed_status.png)

####Отправить пост

![Send post](https://github.com/mym1chelle/cars_sales_project/raw/master/screens/send_post.png)
При отправке сообщения отправляет его всем пользователям со статусом `client`
